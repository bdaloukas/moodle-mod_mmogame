define("mmogametype_quiz/mmogametypequizalone",["mmogametype_quiz/mmogametypequiz"],(function(MmoGameTypeQuiz){return class extends MmoGameTypeQuiz{player;constructor(){super(),this.cIcons=this.hasHelp()?5:4,this.type="alone"}createIconBar(){let i=0;const step=this.iconSize+this.padding,nicknameHeight=Math.round(this.iconSize/3),fragment=document.createDocumentFragment(),[nickname,avatar]=this.createNicknameAvatar(fragment,"mmogame-quiz-alone",Math.round(this.padding+i++*step),this.padding,2*this.iconSize+this.padding,nicknameHeight,this.padding+nicknameHeight,this.iconSize);if(this.player=this.createDivScorePercent(fragment,"mmogame-quiz-alone",this.padding+i++*step,this.padding+nicknameHeight,!0,this.colorScore),this.player.avatarElement=avatar,this.player.nicknameElement=nickname,this.player.cacheAvatar="",this.player.cacheNickname="",this.player.lblScore.title=this.getStringM("js_grade"),this.player.lblRank.title=this.getStringM("js_ranking_grade"),this.createButtonSound(fragment,this.padding+i++*step,this.padding+nicknameHeight,this.iconSize),this.hasHelp()){this.createButtonHelp(fragment,this.padding+i++*step,this.padding).addEventListener("click",(()=>this.onClickHelp()))}this.createArea(2*this.padding+this.iconSize+nicknameHeight,0),this.body.appendChild(fragment)}processSetAnswer(json){if(this.correct=json.correct,void 0!==json.correct&&"multichoice"===this.qtype&&this.onServerAnswerMultichoice(json),this.disableInput(),void 0!==this.aItemAnswer&&void 0!==json.correct)for(let i=0;i<this.aItemAnswer.length;i++)this.aItemAnswer[i].classList.add("disabled");this.createNextButton(this.areaRect.width-this.iconSize-this.padding,this.stripTop),this.showScore(json)}createScreen(json,disabled){if(this.endofgame)return this.createDivMessage("mmogame-quiz-alone-endofgame",this.getStringM("js_game_over")),void this.showScore(json);let child;for(;child=this.area.firstChild;)this.area.removeChild(child);this.isVertical?this.createScreenVertical(json,disabled):this.createScreenHorizontal(json,disabled),this.showScore(json)}createScreenHorizontal(json,disabled){const[width]=this.computeBestFontSize(json);this.radioSize=Math.round(this.fontSize),this.stripTop=this.createAnswer(width,0,width-this.padding,!1,this.fontSize,disabled),this.createDefinition(0,0,width-this.padding,this.stripTop-this.padding,!1,this.fontSize,json.definition),this.stripLeft=width+this.padding}createScreenVertical(json,disabled){this.computeBestFontSize(json),this.radioSize=Math.round(this.fontSize);const defSize=this.createDefinition(0,0,this.areaRect.width,0,!1,this.fontSize,json.definition);this.stripTop=this.createAnswer(0,defSize[1]+this.padding,this.areaRect.width,!1,this.fontSize,disabled),this.stripLeft=0}processGetAttempt(json){if(this.computeDifClock(json.time,json.timestart,json.timeclose),0===parseInt(json.state))return json.qtype="",json.colors&&(this.setColorsString(json.colors),this.createIconBar()),this.showScore(json),void this.createDivMessageStart(this.getStringM("js_wait_to_start"));if(void 0===this.player&&(this.setColorsString(json.colors),this.createIconBar()),json.name&&(document.title=json.name),json.errorcode)return void this.createDivMessage("mmogame-error",json.errorcode);this.state=parseInt(json.state,10),this.fastjson=json.fastjson,this.timefastjson=parseInt(json.timefastjson,10);const nicknameWidth=2*this.iconSize+this.padding,nicknameHeight=this.iconSize/3;console.log(json),this.updateNicknameAvatar(this.player,json.avatar,json.nickname,nicknameWidth,nicknameHeight),this.attempt=json.attempt,this.qtype=json.qtype,"multichoice"===this.qtype&&(this.answers=[],this.answersID=json.answerids,json.answers.forEach(((answer,index)=>{this.answers[index]=this.repairP(answer)}))),this.answer=json.answer??void 0,this.endofgame=void 0!==json.endofgame&&0!==json.endofgame,json.definition=this.repairP(json.definition),this.errorcode=json.errorcode,0!==json.state&&this.createScreen(json,!1),this.sendFastJSON()}showScore(json){super.showScore(this.player,json.sumscore,json.rank,json.percent,json.percentRank,!0),this.player.lblAddScore.innerHTML=void 0===json.addscore?"":json.addscore,this.autoResizeText(this.player.lblAddScore,this.iconSize,this.player.heightLine3,!0,0,0,1)}showHelpScreen(div){div.innerHTML=`\n                <br>\n                <div>${this.getStringT("js_alone_help")}</div><br>\n\n                <table class="mmogame-table-help">\n                    <tr>\n                        <td><img height="83" src="assets/aduel/example2.png" alt="" /></td>\n                        <td>${this.getStringT("js_aduel_example2")}</td>\n                    </tr>\n                </table>\n            `}onServerAnswerMultichoice(json){let foundCorrect=!1,aCorrect=json.correct.split(",");for(let i=0;i<this.answersID.length;i++){if(""===this.answersID[i])continue;const label=this.aItemLabel[i];let iscorrect1;const iscorrect=aCorrect.includes(this.answersID[i]);if(this.aItemAnswer[i].classList.contains("checked")&&(iscorrect1=aCorrect.includes(this.answersID[i])),iscorrect1&&(foundCorrect=!0),!1===iscorrect&&void 0===iscorrect1)continue;const height=this.aItemLabel[i].scrollHeight,move=void 0!==iscorrect1?this.radioSize:0,width=this.labelWidth-move;0!==move&&(label.style.left=parseInt(label.style.left)+move+"px"),this.aItemLabel[i].style.width=width+"px",this.autoResizeText(this.aItemLabel[i],width,height,!0,this.minFontSize,this.maxFontSize,.5),this.onServerAnswerMultichoiceShowCorrect(i,iscorrect1)}this.playAudio(foundCorrect?this.audioYes:this.audioNo)}onServerAnswerMultichoiceShowCorrect(i,iscorrect1,iscorrect){if(iscorrect&&(this.aItemLabel[i].innerHTML="<b><u>"+this.aItemLabel[i].innerHTML+"</b></u>"),void 0!==iscorrect1){let t=parseInt(this.aItemAnswer[i].style.top),div=this.createDiv(this.area,"mmogame-quiz-aduel-correct-answer",this.aItemCorrectX[i],t,this.radioSize,this.radioSize);div.title=iscorrect1?this.getStringT("js_correct_answer"):this.getStringT("js_wrong_answer"),div.innerHTML=this.getSVGcorrect(this.radioSize,iscorrect1,this.colorScore,this.colorScore)}}}}));

//# sourceMappingURL=mmogametypequizalone.min.js.map